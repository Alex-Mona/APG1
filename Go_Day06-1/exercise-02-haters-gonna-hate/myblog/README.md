### Что изменилось:

1. **Создание `rate.Limiter`:**
   - Используется `rate.NewLimiter(1, 3)`, что означает, что будет допускаться 1 запрос в секунду, с возможностью обработки до 3 запросов, если они поступят одновременно.

2. **Middleware для ограничения частоты запросов:**
   - Добавлена функция `rateLimitMiddleware`, которая проверяет, можно ли обработать запрос. Если лимит исчерпан, возвращается ошибка `429 Too Many Requests`.
   - Middleware добавлен в цепочку обработки маршрутов с помощью `r.Use(rateLimitMiddleware)`.

3. **Безопасность работы с `rate.Limiter`:**
   - Используется `sync.Mutex`, чтобы гарантировать корректное управление `limiter` в многопоточной среде.

### Как это работает:

- Если поступает больше запросов, чем допускает `rate.Limiter`, они будут либо отклонены (возвращается `429 Too Many Requests`), либо помещены в очередь для обработки по мере освобождения лимита.
- Это предотвращает перегрузку сервера и защищает его от DDoS-атак или несанкционированного использования.

### Тестирование:

1. Перезапустите сервер и попробуйте сделать несколько запросов подряд.
2. Если вы отправите более 3 запросов в течение одной секунды, последующие запросы должны вернуть `429 Too Many Requests`.