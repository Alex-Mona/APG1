# Веб-приложение для покупки конфет на Go

Это простое веб-приложение на языке Go, которое работает как HTTP-сервер и обрабатывает запросы на покупку конфет. Приложение принимает запросы от клиентов, рассчитывает стоимость конфет, проверяет наличие достаточного количества денег, и возвращает соответствующий ответ с информацией о сдаче или ошибке.

## Основные компоненты

### 1. Структуры данных

Программа использует три структуры данных для обработки запросов и формирования ответов:

- **CandyOrder**: Структура для хранения данных о заказе.
  - `Money` (int): Сумма денег, переданная клиентом.
  - `CandyType` (string): Тип конфет, которые клиент хочет купить.
  - `CandyCount` (int): Количество конфет.

- **ResponseSuccess**: Структура для успешного ответа.
  - `Thanks` (string): Сообщение благодарности.
  - `Change` (int): Сумма сдачи.

- **ResponseError**: Структура для ответа в случае ошибки.
  - `Error` (string): Сообщение об ошибке.

### 2. Цены на конфеты

Переменная `candyPrices` представляет собой словарь, в котором хранится информация о стоимости различных типов конфет:

```go
var candyPrices = map[string]int{
	"CE": 10,
	"AA": 15,
	"NT": 20,
	"DE": 25,
	"YR": 30,
}
```

### 3. Функция buyCandy

Эта функция обрабатывает POST-запросы на путь /buy_candy. Основные шаги обработки:

Декодирование JSON-запроса: Запрос декодируется в структуру CandyOrder. Если данные некорректны, сервер возвращает статус 400 Bad Request.

Проверка типа конфет: Проверяется, существует ли указанный тип конфет в словаре candyPrices. Если тип конфет некорректен, возвращается статус 400 Bad Request.

Проверка количества конфет: Убедитесь, что количество конфет больше нуля. Если это не так, возвращается статус 400 Bad Request.

Расчет стоимости: Рассчитывается общая стоимость заказа на основе количества и цены за единицу.

Проверка достаточности денег: Если денег недостаточно, возвращается статус 402 Payment Required с указанием недостающей суммы.

Формирование успешного ответа: Если все условия выполнены, рассчитывается сдача, и клиенту возвращается успешный ответ с сообщением благодарности и суммой сдачи.

### 4. Функция main

Функция main настраивает маршруты и запускает сервер:

Регистрирует обработчик для пути /buy_candy, который вызывает функцию buyCandy.
Запускает сервер на http://127.0.0.1:3333. Если сервер не может запуститься, программа завершает работу с ошибкой.

### Заключение
Данное приложение является базовым примером веб-сервера на Go, который обрабатывает простые запросы и демонстрирует работу с JSON, HTTP, а также базовую проверку данных.